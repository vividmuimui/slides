<!DOCTYPE html>
<html lang="en">
  <head
    prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#"
  >
    <meta charset="utf-8" />

    <title>Dependabot vs lockdiff</title>

    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="generator" content="reveal-ck 3.9.2" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content="Dependabot vs lockdiff" />
    <meta
      property="og:description"
      content="Slide about 'Dependabot vs lockdiff'. 2019/06/04. Generated by reveal-ck."
    />
    <meta
      property="og:url"
      content="https://vividmuimui.github.io/slides/dependabot_vs_lockdiff/slides"
    />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@vividmuimui" />
    <meta name="twitter:creator" content="@vividmuimui" />
    <meta name="twitter:title" content="Dependabot vs lockdiff" />
    <meta
      name="twitter:description"
      content="Slide about 'Dependabot vs lockdiff'. 2019/06/04. Generated by reveal-ck."
    />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"
    />

    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/night.css" id="theme" />

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css" />

    <link rel="stylesheet" href="css/reveal-ck.css" />

    <link rel="stylesheet" href="css/custom.css" />

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "css/print/pdf.css"
        : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
      <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h1>Dependabot vs BundleUpdate+LockDiff</h1>

          <p>
            <a href="https://github.com/vividmuimui" class="user-mention"
              >@vividmuimui</a
            ><br />
            2019/06/05 社内LT資料
          </p>
        </section>
        <section>
          <h1>話すこと</h1>

          <p>
            最近導入された <code>Dependabot</code> と、<br />
            これまで使っていた <code>BundleUpdate+LockDiff</code> を比較
          </p>
        </section>
        <section>
          <h1>ざっくり用語</h1>
        </section>
        <section>
          <h2>Dependabot</h2>

          <ul>
            <li>
              <a href="https://dependabot.com/">https://dependabot.com/</a>
            </li>
            <li>
              ライブラリのUpdate自動で行ってPullReqestを上げてくれるサービス
            </li>
            <li>最近、privateリポでも完全に無料で使えるようになった</li>
          </ul>
        </section>
        <section>
          <h2>BundleUpdate+LockDiff</h2>

          <ul>
            <li>
              CircleCIでBundleUpdate(rubyでのライブラリの更新)をしてPullReqestを作れるツール
            </li>
            <li>
              正確には <code>circleci-bundle-update-pr-with-lock-diff</code>
              <ul>
                <li>
                  この資料では長いので
                  <code>BundleUpdate+LockDiff</code>と書きます
                </li>
                <li>
                  <a
                    href="https://github.com/vividmuimui/circleci-runner/tree/master/circleci-bundle-update-pr-with-lock-diff"
                    >vividmuimui/circleci-runner</a
                  >
                  <ul>
                    <li>以下の合わせ技+forkしたもの</li>
                    <li>
                      <a href="https://github.com/yhirano55/circleci-runner"
                        >yhirano55/circleci-runner</a
                      >
                      <ul>
                        <li>
                          <a
                            href="https://github.com/masutaka/circleci-bundle-update-pr"
                            >masutaka/circleci-bundle-update-pr</a
                          >
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="https://github.com/vividmuimui/lock_diff"
                        >vividmuimui/lock_diff</a
                      >
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>社内の色んな所で使われている</li>
          </ul>
        </section>
        <section>
          <h2>ざっくり用語まとめ</h2>

          <p>
            Dependabot, BundleUpdate+LockDiff
            どちらも、ライブラリの更新をしてPullReqestを上げてくれる。<br />
            Dependabotはサービスなのでとても高機能。<br />
            BundleUpdate+LockDiff は長いこと社内で便利に使ってきたやつ。
          </p>
        </section>
        <section>
          <h1>簡単な機能比較</h1>
        </section>
        <section>
          <table>
            <thead>
              <tr>
                <th> </th>
                <th>Dependabot</th>
                <th>BundleUpdate+LockDiff</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>PR</td>
                <td>ライブラリごとに1PR</td>
                <td>1つのPRで一括で更新</td>
              </tr>
              <tr>
                <td>言語</td>
                <td>Ruby,JSなどたくさん</td>
                <td>Rubyだけ</td>
              </tr>
              <tr>
                <td>ChangeLog</td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
              </tr>
              <tr>
                <td>Commits</td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
              </tr>
              <tr>
                <td>rubygems へのリンク</td>
                <td>
                  <img
                    class="emoji"
                    alt=":x:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png"
                  />
                </td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
              </tr>
              <tr>
                <td>Vulnerabilities</td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
                <td>
                  <img
                    class="emoji"
                    alt=":x:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png"
                  />
                </td>
              </tr>
              <tr>
                <td>高機能感</td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
                <td>
                  <img
                    class="emoji"
                    alt=":x:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png"
                  />
                </td>
              </tr>
              <tr>
                <td>組み込みやすさ</td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
                <td>
                  <img
                    class="emoji"
                    alt=":o:"
                    src="https://github.githubassets.com/images/icons/emoji/unicode/2b55.png"
                  />
                </td>
              </tr>
            </tbody>
          </table>

          <p>参考PR</p>
          <ul>
            <li>
              Dependabot:
              <a href="https://github.com/vividmuimui/rails_tutorial/pull/44"
                >vividmuimui/rails_tutorial#44</a
              >
            </li>
            <li>
              BundleUpdate+LockDiff:
              <a href="https://github.com/vividmuimui/lock_diff_sample/pull/15"
                >vividmuimui/lock_diff_sample#15</a
              >
            </li>
          </ul>
        </section>
        <section>
          <h1>Dependabot</h1>

          <ul>
            <li>ライブラリごとにPRがあがる</li>
            <li>
              対応言語が多い
              <ul>
                <li>
                  <a href="https://dependabot.com/#languages"
                    >https://dependabot.com/#languages</a
                  >
                </li>
              </ul>
            </li>
            <li>脆弱性対応の更新なのかわかる</li>
            <li>Compatibilityが見れる</li>
            <li>
              botが優秀
              <ul>
                <li>
                  必要なくなったら自動で閉じたり、コンフリクトしてたら自動でrebaseしてくれたりする。
                </li>
              </ul>
            </li>
            <li>
              カスタマイズできる
              <ul>
                <li>
                  <a href="https://dependabot.com/docs/config-file/"
                    >https://dependabot.com/docs/config-file/</a
                  >
                </li>
              </ul>
            </li>
            <li>全体通して圧倒的に高機能</li>
            <li>
              PRがたくさん上がってマージしていくので、CIのキューが詰まりがち
            </li>
          </ul>
        </section>
        <section>
          <h2>BundleUpdate+LockDiff</h2>

          <ul>
            <li>CircleCIに簡単に組み込める</li>
            <li>RubyのBundle updateだけできる</li>
            <li>Bundle Updateしてるだけなので、1PRで一括で更新が入る</li>
            <li>
              LockDiffもそれなりに便利
              <ul>
                <li>
                  Tachikoma + LockDiff
                  といった感じで組み合わせれば、CircleCi以外でも簡単に動く
                </li>
              </ul>
            </li>
            <li>
              普段自分たちが使うコマンドでupdateされるので、理解しやすい
              <ul>
                <li>
                  基本的には<code>bundle update</code>してPR作ってるだけなので。
                </li>
              </ul>
            </li>
            <li>
              Dependabotに比べると機能が少ない
              <ul>
                <li>個人のOSS開発なので</li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h1>どっちが良いか・どう使い分けるか</h1>
        </section>
        <section>
          <h2>どっちが良いか・どう使い分けるか</h2>

          <p>現状両方使っている。チームの中で、それが良さそうとなった。</p>

          <p>
            まだ、Dependabotを導入して1週間も立ってないが、<br />
            DependabotはDaily,
            BundleUpdate+LockDiffはWeeklyで動かしているのが良いリズムっぽい。
          </p>

          <p>
            ちなみに、yarn(JS)に関してもDependabotだけでなく以下を併用してWeeklyで更新されるようにしている
          </p>

          <ul>
            <li>
              <a
                href="https://github.com/vividmuimui/circleci-runner/tree/master/ci-yarn-upgrade"
                >vividmuimui/circleci-runner</a
              >
              <ul>
                <li>
                  <a href="https://github.com/yhirano55/circleci-runner"
                    >yhirano55/circleci-runner</a
                  >
                </li>
                <li>
                  <a href="https://github.com/taichi/ci-yarn-upgrade"
                    >taichi/ci-yarn-upgrade</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h2>良いリズム</h2>

          <ul>
            <li>
              基本的には Dependabotが上げてくるPRを毎日消化していく
              <ul>
                <li>dailyで動かしても、多くても1日2,3PR程度しか上がらない</li>
              </ul>
            </li>
            <li>
              溜まってしまったら、 BundleUpdate+LockDiff で一括マージする
              <ul>
                <li>DependabotのPRはbotが自動で閉じてくれる</li>
              </ul>
            </li>
            <li>Security update(脆弱性対応)は特に高速にマージする</li>
          </ul>
        </section>
        <section>
          <h2>終わり</h2>

          <p>
            <code>Dependabot</code>,
            <code>BundleUpdate+LockDiff</code>
            どっちも便利なので両方使っていく。
          </p>

          <p>チーム・リポジトリによっては、</p>
          <ul>
            <li>Dependabotのsecurity updateだけにする</li>
            <li><code>BundleUpdate+LockDiff</code>だけにする</li>
          </ul>

          <p>というのも全然アリ。</p>
        </section>
        <section>
          <p>
            ぜひ便利なので、 <code>Dependabot</code>,
            <code>BundleUpdate+LockDiff</code> 使ってみてください！。<br />
            導入の仕方とか使用感とかに感して、質問・相談あれば遠慮なくしてください。
          </p>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      (function () {
        function extend(a, b) {
          for (var i in b) {
            a[i] = b[i];
          }
        }
        var baseOptions = {
          transition: "default",

          dependencies: [
            {
              src: "lib/js/classList.js",
              condition: function () {
                return !document.body.classList;
              },
            },
            {
              src: "plugin/markdown/marked.js",
              condition: function () {
                return !!document.querySelector("[data-markdown]");
              },
            },
            {
              src: "plugin/markdown/markdown.js",
              condition: function () {
                return !!document.querySelector("[data-markdown]");
              },
            },
            {
              src: "plugin/highlight/highlight.js",
              async: true,
              condition: function () {
                return !!document.querySelector("pre code");
              },
              callback: function () {
                hljs.initHighlightingOnLoad();
              },
            },
            { src: "plugin/zoom-js/zoom.js", async: true },
            { src: "plugin/notes/notes.js", async: true },
          ],
        };

        var configOptions = {
          slideNumber: true,
          history: false,
          controls: false,
          transition: "none",
        };
        var initializeOptions = {};
        extend(initializeOptions, baseOptions);
        extend(initializeOptions, configOptions);
        Reveal.initialize(initializeOptions);
      })();
    </script>
  </body>
</html>
